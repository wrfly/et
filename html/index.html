<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Email Tracker</title>
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" media="screen" href="/main.css" />
    <script src="/jquery-3.3.1.min.js"></script>
    <script src="/clipboard.min.js"></script>
    <script src="/buttons.js"></script>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-62244864-11"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-62244864-11');
    </script>
</head>
<body>
    <br>
    <div class="center">
        <h1>Email Tracker</h1>
        <img src="/api/status/task.svg?total">
        <img src="/api/status/task.svg?daily">
        <img src="/api/status/notified.svg?total">
        <img src="/api/status/notified.svg?daily">
        <a class="github-button" href="https://github.com/wrfly/et" data-icon="octicon-star" data-show-count="true" aria-label="Star wrfly/et on GitHub">Star</a>
        <p>Send you notification emails when some one opens the email.</p>
        <br>
        <button onclick="toggle('t1', ['t2','t3'])">Submit Track Task</button>
        <button onclick="toggle('t2', ['t1','t3'])">Resume Track Task</button>
        <button onclick="toggle('t3', ['t2','t1'])">Get Task Status</button>
        <br>
        <br>
    </div>

    <div class="center">
        <!-- submit task -->
        <div id="t1" >
            <b>Notifier:</b><input type="email" placeholder="track@kfd.me" id="notifier" title="Tell who?">
            <br>
            <b>Comments:</b><input type="text" placeholder="This email sends to xxx" id="comments" title="How to identify this tracking task?">
            <br>
            <button id="submit" title="Submit Track Task">OK, submit</button>

            <div class="box" hidden id="submit_task_box">
                Insert this image into your email body: <br>
                <div class="tooltip">
                    <textarea id="link" autocorrect="off" autocapitalize="off" spellcheck="false" readonly  data-clipboard-target="#link" >
                    </textarea>
                    <span class="tooltiptext">Click to copy!</span>
                </div>

                <br>Or with the HTML code : <br>
                <div class="tooltip">
                    <textarea id="paste" autocorrect="off" autocapitalize="off" spellcheck="false" readonly  data-clipboard-target="#paste" >
                    </textarea>
                    <span class="tooltiptext">Click to copy!</span>
                </div>
            </div>
        </div>

        <!-- resume task -->
        <div id="t2" hidden>
            <b>Link:</b><input type="text" style="width: 521px"  placeholder="https://et.kfd.me/t/xxxxx-xxxxx-xxxxx-xxxxx-xxxxx-xxxxx-xx.png" class="taskID" title="Resume which task?">
            <br>
            <button id="resume" title="Resume this task">OK, resume</button>

            <div class="box" hidden id="result_box"></div>
        </div>

        <!-- get task status -->
        <div id="t3" hidden>
            <b>Link:</b><input type="text" style="width: 521px" placeholder="https://et.kfd.me/t/xxxxx-xxxxx-xxxxx-xxxxx-xxxxx-xxxxx-xx.png" class="taskID" title="Get which task?">
            <br>
            <button id="status" title="Submit Track Task">OK, check</button>

            <div class="box" hidden id="status_box">
                <table class="box" id="_basic_status">
                    <tr>
                        <th>Task Status</th>
                        <th>Submit At</th>
                        <th>Comments</th>
                    </tr>
                </table>
                <br>
                <table id="_events" class="box" style="width: 70%;">
                    <tr>
                        <th style="min-width:180px">Time</th>
                        <th>IP</th>
                        <th>UA</th>
                    </tr>
                </table>
            </div>
        </div>
    </div>

    <!-- error box -->
    <div class="center box" hidden id="error_box">
        Error: <p id="error"></p>
    </div>

    <footer style="text-align: center;">
        ET - Email Tracker | Loved by <a class="github-button" href="https://github.com/wrfly" aria-label="Follow @wrfly on GitHub">@wrfly</a>
    </footer>
    <script src="/main.js"></script>
</body>
</html>